{"ast":null,"code":"import _classCallCheck from\"/Users/james/Desktop/et/et/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/james/Desktop/et/et/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/james/Desktop/et/et/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/james/Desktop/et/et/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import firebase from'./firebaseConfig';import ErrorBox from'./ErrorBox';import'./App.css';import{NavLink}from'react-router-dom';var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);_this=_super.call(this);_this.state={cellNo:'',pin:'',userPin:'',error:''};return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.checkLoggedIn();document.getElementsByClassName(\"signedOutContainer\")[0].style.height=window.innerHeight+'px';setTimeout(function(){document.getElementsByClassName(\"signedOutContainer\")[0].classList.toggle(\"signedOutContainerShowing\");},1400);this.checkLoggedIn();setInterval(function(){_this2.altColour();},4000);}},{key:\"checkLoggedIn\",value:function checkLoggedIn(){var user=localStorage.getItem('oc_user');console.log(user);if(user){window.location.href=\"/home\";}}},{key:\"verifyCellNo\",value:function verifyCellNo(){var cell=this.state.cellNo;if(cell.length==10){document.getElementsByClassName(\"confirmPIN\")[0].classList.toggle(\"confirmPINShowing\");this.sendSMS();}else{this.setState({error:\"Invalid phone number entered\"});this.callError();this.animateNo(document.getElementsByClassName(\"registrationPanel\")[0],document.getElementById(\"cellphone\"));}}},{key:\"altColour\",value:function altColour(){var colours=[\"#FFDAC1\",\"#C7CEEA\",\"#E2F0CB\",\"#B5EAD7\",\"#FF9AA2\",\"#AFC7D0\"];var rand=parseInt(Math.random()*(colours.length-1));console.log(rand,colours[rand]);document.getElementsByClassName(\"signedOutContainerShowing\")[0].style.backgroundColor=colours[rand];document.getElementsByClassName(\"signedOutContainerShowing\")[0].style.transition='4s';}},{key:\"verifyPIN\",value:function verifyPIN(){if(this.state.pin==this.state.userPin){var oc_email=this.state.cellNo+'_oc'+this.state.pin+'@onecab.co.za';console.log(oc_email);var password=this.state.pin+'_oc';firebase.auth().createUserWithEmailAndPassword(oc_email,password).then(function(result){var user=firebase.auth().currentUser;console.log(user);localStorage.setItem('oc_user',JSON.stringify(user));window.location.href=\"/home\";});}else{//show error\nthis.setState({error:\"Invalid PIN entered\"});this.callError();var pin=document.getElementsByClassName(\"confirmPINShowing\")[0];this.animateNo(pin,document.getElementById(\"cellphone1\"));}}},{key:\"callError\",value:function callError(){var errorBox=document.getElementsByClassName(\"errorBox\")[0];errorBox.classList.toggle(\"errorShowing\");setTimeout(function(){errorBox.classList.toggle(\"errorShowing\");},2500);}},{key:\"animateNo\",value:function animateNo(pin,input){pin.style.marginLeft=\"-4%\";setTimeout(function(){pin.style.marginLeft=\"4%\";pin.style.transition=\".25s\";},250);setTimeout(function(){pin.style.marginLeft=\"-3%\";pin.style.transition=\".25s\";},500);setTimeout(function(){pin.style.marginLeft=\"2%\";pin.style.transition=\".25s\";input.value=\"\";},650);setTimeout(function(){pin.style.marginLeft=\"1%\";pin.style.transition=\".25s\";},900);setTimeout(function(){pin.style.marginLeft=\"0%\";pin.style.transition=\".70s\";},901);}},{key:\"sendSMS\",value:function sendSMS(){var pin=Math.floor(Math.random()*100000);this.setState({pin:pin});console.log(pin);var number=this.state.cellNo.replace('0','27');var body=\"Your Onecab verification is \".concat(pin);var cors='https://cors-anywhere.herokuapp.com';var sms='https://api.bulksms.com/v1/messages/send?to='+number+'&body='+body;var xhr=new XMLHttpRequest();xhr.open('GET',cors+'/'+sms,true);xhr.setRequestHeader('path','api.bulksms.com/v1/messages/send?');xhr.setRequestHeader('Authority','api.bulksms.com');xhr.setRequestHeader('scheme','https');xhr.setRequestHeader('origin','https://onecab.co.za');xhr.setRequestHeader('Access-Control-Allow-Origin','https://onecab.co.za');xhr.setRequestHeader('Authorization','Basic emlwaTpaaXBpMTIzNDU2');xhr.onreadystatechange=function(){if(xhr.readyState=='4'){console.log(\"Success\");}else{console.log(\"Unable to send...\");}};//xhr.send();\n}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"signedOutContainer\"},/*#__PURE__*/React.createElement(ErrorBox,{error:this.state.error}),/*#__PURE__*/React.createElement(\"div\",{className:\"confirmPIN\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h2\",{id:\"welcome-text\"},\"Verification\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",{id:\"welcome-small-text\"},\"We've sent a verification PIN to \",this.state.cellNo,\". Please enter the PIN below:\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",onChange:function onChange(text){_this3.setState({userPin:text.target.value});},style:{marginLeft:20},id:\"cellphone1\",\"max-length\":\"10\",placeholder:\"Verification PIN\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{id:\"submitLogin\",style:{marginLeft:20},onClick:function onClick(){_this3.verifyPIN();}},\"Finish\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{id:\"negative\",style:{marginLeft:20},onClick:function onClick(){_this3.verifyCellNo();}},\"Re-enter Phone Number\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h2\",{id:\"welcome-text\"},\"Welcome.\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"p\",{id:\"welcome-small-text\"},\"Onecab is the fresh, new and affordable. By keeping our operations lean, small and agile we save you money on every journey that you take with us.\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"fieldset\",{className:\"registrationPanel\"},/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(\"p\",{id:\"smallTitle\"},\"Create your account\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",onChange:function onChange(text){_this3.setState({cellNo:text.target.value});},id:\"cellphone\",\"max-length\":\"10\",placeholder:\"Cellphone Number\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{id:\"submitLogin\",onClick:function onClick(){_this3.verifyCellNo();}},\"Continue\"))));}}]);return Login;}(React.Component);export{Login as default};","map":{"version":3,"sources":["/Users/james/Desktop/et/et/src/Components/Login.js"],"names":["React","firebase","ErrorBox","NavLink","Login","state","cellNo","pin","userPin","error","checkLoggedIn","document","getElementsByClassName","style","height","window","innerHeight","setTimeout","classList","toggle","setInterval","altColour","user","localStorage","getItem","console","log","location","href","cell","length","sendSMS","setState","callError","animateNo","getElementById","colours","rand","parseInt","Math","random","backgroundColor","transition","oc_email","password","auth","createUserWithEmailAndPassword","then","result","currentUser","setItem","JSON","stringify","errorBox","input","marginLeft","value","floor","number","replace","body","cors","sms","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","text","target","verifyPIN","verifyCellNo","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport firebase from './firebaseConfig';\nimport ErrorBox from './ErrorBox';\nimport './App.css';\nimport { NavLink } from 'react-router-dom';\n\n\nexport default class Login extends React.Component{\n    constructor(){\n        super();\n        this.state = {\n            cellNo: '',\n            pin: '',\n            userPin: '',\n            error: ''\n        }\n    }\n\n\n    componentDidMount(){\n        this.checkLoggedIn();\n        document.getElementsByClassName(\"signedOutContainer\")[0].style.height = window.innerHeight + 'px';\n        setTimeout(()=>{document.getElementsByClassName(\"signedOutContainer\")[0].classList.toggle(\"signedOutContainerShowing\")},1400);\n        this.checkLoggedIn();\n        setInterval(()=>{this.altColour()}, 4000);\n    }\n\n\n    checkLoggedIn(){\n        var user = localStorage.getItem('oc_user');\n        console.log(user);\n        if(user){\n            window.location.href = \"/home\";\n        }\n    }\n\n    verifyCellNo(){\n        var cell = this.state.cellNo;\n        if(cell.length == 10){\n        document.getElementsByClassName(\"confirmPIN\")[0].classList.toggle(\"confirmPINShowing\");\n        this.sendSMS();\n        }else{\n            this.setState({error: \"Invalid phone number entered\"});\n            this.callError();\n            this.animateNo(document.getElementsByClassName(\"registrationPanel\")[0], document.getElementById(\"cellphone\"));\n        }\n    }\n\n    altColour(){\n        var colours = [\"#FFDAC1\",\"#C7CEEA\",\"#E2F0CB\",\"#B5EAD7\",\"#FF9AA2\",\"#AFC7D0\"];\n        var rand = parseInt(Math.random()*(colours.length - 1));\n        console.log(rand,colours[rand]);\n        document.getElementsByClassName(\"signedOutContainerShowing\")[0].style.backgroundColor = colours[rand];\n        document.getElementsByClassName(\"signedOutContainerShowing\")[0].style.transition = '4s';\n    }\n\n    verifyPIN(){\n        if(this.state.pin == this.state.userPin){\n            \n            var oc_email = this.state.cellNo + '_oc'+this.state.pin+'@onecab.co.za';\n            console.log(oc_email);\n            var password = this.state.pin + '_oc';\n            firebase.auth().createUserWithEmailAndPassword(oc_email, password).then(result => {\n                    var user = firebase.auth().currentUser;\n                    console.log(user);\n                    localStorage.setItem('oc_user', JSON.stringify(user));\n                    window.location.href = \"/home\";\n            });\n        }else{\n            //show error\n            this.setState({error: \"Invalid PIN entered\"});\n            this.callError();\n            var pin = document.getElementsByClassName(\"confirmPINShowing\")[0];\n            this.animateNo(pin, document.getElementById(\"cellphone1\"));\n        }\n    }\n\n    callError(){\n        var errorBox = document.getElementsByClassName(\"errorBox\")[0];\n        errorBox.classList.toggle(\"errorShowing\");\n        setTimeout(()=>{errorBox.classList.toggle(\"errorShowing\")}, 2500);\n    }\n\n    animateNo(pin, input){\n        pin.style.marginLeft = \"-4%\";\n            setTimeout(()=>{pin.style.marginLeft = \"4%\"; pin.style.transition = \".25s\"}, 250);\n            setTimeout(()=>{pin.style.marginLeft = \"-3%\"; pin.style.transition = \".25s\"}, 500);\n            setTimeout(()=>{pin.style.marginLeft= \"2%\"; pin.style.transition = \".25s\"; input.value = \"\"}, 650);\n            setTimeout(()=>{pin.style.marginLeft = \"1%\"; pin.style.transition = \".25s\"}, 900);\n            setTimeout(()=>{pin.style.marginLeft = \"0%\"; pin.style.transition = \".70s\"}, 901);\n    }\n\n    sendSMS(){\n        var pin = Math.floor(Math.random()*100000);\n        this.setState({pin: pin});\n        console.log(pin);\n        var number = this.state.cellNo.replace('0','27');\n        var body = `Your Onecab verification is ${pin}`;\n        var cors = 'https://cors-anywhere.herokuapp.com';\n        var sms = 'https://api.bulksms.com/v1/messages/send?to='+number+'&body='+body;\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', cors+'/'+sms, true);\n        xhr.setRequestHeader('path', 'api.bulksms.com/v1/messages/send?');\n        xhr.setRequestHeader('Authority', 'api.bulksms.com');\n        xhr.setRequestHeader('scheme','https');\n        xhr.setRequestHeader('origin', 'https://onecab.co.za');\n        xhr.setRequestHeader('Access-Control-Allow-Origin', 'https://onecab.co.za');\n        xhr.setRequestHeader('Authorization', 'Basic emlwaTpaaXBpMTIzNDU2');\n        xhr.onreadystatechange = () => {\n        if(xhr.readyState == '4'){\n          console.log(\"Success\");\n          }else{\n          console.log(\"Unable to send...\");\n          }\n          }\n        //xhr.send();\n        }\n\n\n    render(){\n        return(\n            <div className=\"signedOutContainer\">\n                <ErrorBox error={this.state.error}/>\n                <div className=\"confirmPIN\">\n                <br/>\n                <h2 id=\"welcome-text\">Verification</h2><br/>\n                    <p id=\"welcome-small-text\">We've sent a verification PIN to {this.state.cellNo}. Please enter the PIN below:</p><br/>\n                    <input type=\"number\" onChange={(text)=>{this.setState({userPin: text.target.value})}} style={{marginLeft: 20}} id=\"cellphone1\" max-length=\"10\" placeholder=\"Verification PIN\"/><br/>\n                    <button id=\"submitLogin\" style={{marginLeft: 20}} onClick={()=>{this.verifyPIN()}}>Finish</button>\n                    <br/><br/>\n                    <button id=\"negative\" style={{marginLeft: 20}} onClick={()=>{this.verifyCellNo()}}>Re-enter Phone Number</button>\n                </div>\n\n\n            <br/>\n            <h2 id=\"welcome-text\">Welcome.</h2><br/>\n            <p id=\"welcome-small-text\">Onecab is the fresh, new and affordable.\n            By keeping our operations lean, small and agile we save you money on every journey that you take with us.</p><br/>\n\n            <fieldset className=\"registrationPanel\">\n            <center>\n            <p id=\"smallTitle\">\n            Create your account\n            </p><br/>\n            <input type=\"number\" onChange={(text)=>{this.setState({cellNo: text.target.value})}} id=\"cellphone\" max-length=\"10\" placeholder=\"Cellphone Number\"/><br/>\n            <button id=\"submitLogin\" onClick={()=>{this.verifyCellNo()}}>Continue</button>\n            </center>\n            </fieldset>\n            </div>\n        );\n    }\n\n}"]},"metadata":{},"sourceType":"module"}