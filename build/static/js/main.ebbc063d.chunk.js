(this.webpackJsonpet=this.webpackJsonpet||[]).push([[0],{30:function(e,t,n){e.exports=n(54)},35:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(28),l=n.n(r),i=(n(35),n(10)),s=n(11),c=n(13),u=n(12),m=(n(36),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{className:"errorBox"},o.a.createElement("center",null,o.a.createElement("p",{id:"errorText"},this.props.error)))}}]),n}(o.a.Component)),h=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.checkLoggedIn()}},{key:"checkLoggedIn",value:function(){localStorage.getItem("oc_user")?console.log("Logged in..."):window.location.href="/"}},{key:"render",value:function(){return o.a.createElement("div",{className:"appContainer"},o.a.createElement(m,null),o.a.createElement("h2",null,"Home"))}}]),n}(o.a.Component),g=n(24);g.initializeApp({apiKey:"AIzaSyA8pLz0it3fsyGDM897C-5d447BsbQQyWA",authDomain:"my-awesome-project-ebf03.firebaseapp.com",databaseURL:"https://my-awesome-project-ebf03.firebaseio.com",projectId:"my-awesome-project-ebf03",storageBucket:"my-awesome-project-ebf03.appspot.com",messagingSenderId:"1097690692681",appId:"1:1097690692681:web:c4fa8df4549fe75f38d398"});var d=g,f=(n(51),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).state={cellNo:"",pin:"",userPin:"",error:""},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.checkLoggedIn(),document.getElementsByClassName("signedOutContainer")[0].style.height=window.innerHeight+"px",setTimeout((function(){document.getElementsByClassName("signedOutContainer")[0].classList.toggle("signedOutContainerShowing")}),1400),this.checkLoggedIn(),setInterval((function(){e.altColour()}),4e3)}},{key:"checkLoggedIn",value:function(){var e=localStorage.getItem("oc_user");console.log(e),e&&(window.location.href="/home")}},{key:"verifyCellNo",value:function(){10==this.state.cellNo.length?(document.getElementsByClassName("confirmPIN")[0].classList.toggle("confirmPINShowing"),this.sendSMS()):(this.setState({error:"Invalid phone number entered"}),this.callError(),this.animateNo(document.getElementsByClassName("registrationPanel")[0],document.getElementById("cellphone")))}},{key:"altColour",value:function(){var e=["#FFDAC1","#C7CEEA","#E2F0CB","#B5EAD7","#FF9AA2","#AFC7D0"],t=parseInt(Math.random()*(e.length-1));console.log(t,e[t]),document.getElementsByClassName("signedOutContainerShowing")[0].style.backgroundColor=e[t],document.getElementsByClassName("signedOutContainerShowing")[0].style.transition="4s"}},{key:"verifyPIN",value:function(){if(this.state.pin==this.state.userPin){var e=this.state.cellNo+"_oc"+this.state.pin+"@onecab.co.za";console.log(e);var t=this.state.pin+"_oc";d.auth().createUserWithEmailAndPassword(e,t).then((function(e){var t=d.auth().currentUser;console.log(t),localStorage.setItem("oc_user",JSON.stringify(t)),window.location.href="/home"}))}else{this.setState({error:"Invalid PIN entered"}),this.callError();var n=document.getElementsByClassName("confirmPINShowing")[0];this.animateNo(n,document.getElementById("cellphone1"))}}},{key:"callError",value:function(){var e=document.getElementsByClassName("errorBox")[0];e.classList.toggle("errorShowing"),setTimeout((function(){e.classList.toggle("errorShowing")}),2500)}},{key:"animateNo",value:function(e,t){e.style.marginLeft="-4%",setTimeout((function(){e.style.marginLeft="4%",e.style.transition=".25s"}),250),setTimeout((function(){e.style.marginLeft="-3%",e.style.transition=".25s"}),500),setTimeout((function(){e.style.marginLeft="2%",e.style.transition=".25s",t.value=""}),650),setTimeout((function(){e.style.marginLeft="1%",e.style.transition=".25s"}),900),setTimeout((function(){e.style.marginLeft="0%",e.style.transition=".70s"}),901)}},{key:"sendSMS",value:function(){var e=Math.floor(1e5*Math.random());this.setState({pin:e}),console.log(e);var t="https://api.bulksms.com/v1/messages/send?to="+this.state.cellNo.replace("0","27")+"&body="+"Your Onecab verification is ".concat(e),n=new XMLHttpRequest;n.open("GET","https://cors-anywhere.herokuapp.com/"+t,!0),n.setRequestHeader("path","api.bulksms.com/v1/messages/send?"),n.setRequestHeader("Authority","api.bulksms.com"),n.setRequestHeader("scheme","https"),n.setRequestHeader("origin","https://onecab.co.za"),n.setRequestHeader("Access-Control-Allow-Origin","https://onecab.co.za"),n.setRequestHeader("Authorization","Basic emlwaTpaaXBpMTIzNDU2"),n.onreadystatechange=function(){"4"==n.readyState?console.log("Success"):console.log("Unable to send...")}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"signedOutContainer"},o.a.createElement(m,{error:this.state.error}),o.a.createElement("div",{className:"confirmPIN"},o.a.createElement("br",null),o.a.createElement("h2",{id:"welcome-text"},"Verification"),o.a.createElement("br",null),o.a.createElement("p",{id:"welcome-small-text"},"We've sent a verification PIN to ",this.state.cellNo,". Please enter the PIN below:"),o.a.createElement("br",null),o.a.createElement("input",{type:"number",onChange:function(t){e.setState({userPin:t.target.value})},style:{marginLeft:20},id:"cellphone1","max-length":"10",placeholder:"Verification PIN"}),o.a.createElement("br",null),o.a.createElement("button",{id:"submitLogin",style:{marginLeft:20},onClick:function(){e.verifyPIN()}},"Finish"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{id:"negative",style:{marginLeft:20},onClick:function(){e.verifyCellNo()}},"Re-enter Phone Number")),o.a.createElement("br",null),o.a.createElement("h2",{id:"welcome-text"},"Welcome."),o.a.createElement("br",null),o.a.createElement("p",{id:"welcome-small-text"},"Onecab is the fresh, new and affordable. By keeping our operations lean, small and agile we save you money on every journey that you take with us."),o.a.createElement("br",null),o.a.createElement("fieldset",{className:"registrationPanel"},o.a.createElement("center",null,o.a.createElement("p",{id:"smallTitle"},"Create your account"),o.a.createElement("br",null),o.a.createElement("input",{type:"number",onChange:function(t){e.setState({cellNo:t.target.value})},id:"cellphone","max-length":"10",placeholder:"Cellphone Number"}),o.a.createElement("br",null),o.a.createElement("button",{id:"submitLogin",onClick:function(){e.verifyCellNo()}},"Continue"))))}}]),n}(o.a.Component)),p=(n(52),n(53),n(20)),y=n(2),b=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement(p.BrowserRouter,null,o.a.createElement(y.g,null,o.a.createElement(y.d,{exact:!0,path:"/"},o.a.createElement(f,null)),o.a.createElement(y.d,{exact:!0,path:"/home"},o.a.createElement(h,null))))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.ebbc063d.chunk.js.map